*** BURNDOWN LIST ***
2026-01-12 20:24
Updated: 2026-01-13

# Fix Known Race Colors âœ… DONE (PR #54)
* Added color-utils.ts with contrast-safe color functions
* Added accentForWhiteBg and accentBackground to all color schemes

# Fix title + CoverPage âœ… DONE (PR #54)
* Removed separate "title" field - periodName is now the book title
* Removed "By" prefix before athlete name
* Adjusted font sizing for cleaner look

# Foreword generator âœ… DONE (PR #54)
* Added magic wand button in BookGenerationModal
* Created claude-client.ts and foreword-generator.ts
* Note: Uses Anthropic API directly (not AWS Bedrock) - can migrate later if needed

# Table of Contents âœ… DONE (PR #54)
* Fixed category ordering: Overview â†’ Races â†’ Training Log â†’ Highlights
* Removed Activity Log entries from TOC (only show divider pages)
* Removed leader dots - clean layout with page numbers right-aligned
* Fixed BookDocument to use TableOfContentsPage (not Document-wrapped version)

# Period in Review âœ… FIXED (PR #56)
* curator.ts: renamed "Year at a Glance" â†’ "Period at a Glance" and "Year Summary" â†’ "Period Summary"
* YearStats: Reduced hero font sizes (52-86pt â†’ 32-48pt)
* YearStats: Added thousands separators (commas) to all numeric values
* YearStats: MonthlyBarChart now shows only months in actual period range
* YearCalendar: Added thousands separators to all stats displays

**Original requirements (addressed):**
* âœ… Year_Stats and Year_at_a_Glance statistics and graphs should include only the period chosen for the book

# RaceSpread template âœ… IMPLEMENTED (PR #55)
* Added 'auto' variant to RaceSection that dynamically selects layout based on content richness
* Content scoring algorithm: photos, description, comments, kudos, PRs all contribute points
* Variants: auto (default), compact (2 pages), standard (4 pages), full (6+ pages), minimal (2 pages, no hero)
* BestEffortsTable already has gold/silver/bronze highlighting for PRs
* SplitsChartSVG has showElevation toggle for conditional elevation display
* Race color schemes supported via theme props

# Month Dividers ðŸ”¶ IN PROGRESS
* MonthDividers should be 2 pages -- left and right.  Perhaps photos on the left, calendar and comments, etc, on the right?
* Include a calendar for the month, in strava-streaks style (use existing component); if almost all activities are the same type (e.g., all runs), then use the strava-training style component
* Create a "default hierarchy" of activites within the month -- e.g., each activity is given points for the number of PRs it includes, or if it's in the top-5 by kudos / comments, relative effort, distance, elevation, etc.  Then, sort the activities within the month based on this hierarchy.
* Use the default hierarchy to choose photos and comments to display on the monthly divider page (e.g., comments with the most likes go first; then sorted by highest-hierarchy-points first)

**Implementation started (2026-01-13):**
* Created `MonthlyDividerSpread.tsx` with 2-page layout:
  - Left page: Photo grid (hero + 3 smaller photos) from top-scored activities
  - Right page: Calendar (IconCalendarMonth or BubbleCalendarMonth) + stats + top comments
* Added `scoreActivity()` function for activity hierarchy scoring:
  - PRs, kudos, comments, suffer score, distance, elevation, photos, description, race status
* Added `getTopPhotos()` and `getTopComments()` functions using hierarchy scores
* Uses existing calendar-views.tsx components (IconCalendarMonth for mixed sports, BubbleCalendarMonth for single-sport months)
* **NEEDS:** Build verification after system restart (had lock file issues)

# Activity Log
* Activity Log entries should include: descriptions; kudo count; comments; photos if possible (may be hard given Strava API call limits?)

