*** BURNDOWN LIST ***
2026-01-12 20:24
Updated: 2026-01-13

# Fix Known Race Colors ✅ DONE (PR #54)
* Added color-utils.ts with contrast-safe color functions
* Added accentForWhiteBg and accentBackground to all color schemes

# Fix title + CoverPage ✅ DONE (PR #54)
* Removed separate "title" field - periodName is now the book title
* Removed "By" prefix before athlete name
* Adjusted font sizing for cleaner look

# Foreword generator ✅ DONE (PR #54)
* Added magic wand button in BookGenerationModal
* Created claude-client.ts and foreword-generator.ts
* Note: Uses Anthropic API directly (not AWS Bedrock) - can migrate later if needed

# Table of Contents ✅ DONE (PR #54)
* Fixed category ordering: Overview → Races → Training Log → Highlights
* Removed Activity Log entries from TOC (only show divider pages)
* Removed leader dots - clean layout with page numbers right-aligned
* Fixed BookDocument to use TableOfContentsPage (not Document-wrapped version)

# Period in Review ✅ FIXED (PR #56)
* curator.ts: renamed "Year at a Glance" → "Period at a Glance" and "Year Summary" → "Period Summary"
* YearStats: Reduced hero font sizes (52-86pt → 32-48pt)
* YearStats: Added thousands separators (commas) to all numeric values
* YearStats: MonthlyBarChart now shows only months in actual period range
* YearCalendar: Added thousands separators to all stats displays

**Original requirements (addressed):**
* ✅ Year_Stats and Year_at_a_Glance statistics and graphs should include only the period chosen for the book

## -> NOT DONE, please check
* YearStats still appears as [Year] Summary in TOC
* Year at a Glance still reads that way in TOC
* Year at a Glance is still showing the ending Year, not the period selected

# RaceSpread template ✅ IMPLEMENTED (PR #55)
* Added 'auto' variant to RaceSection that dynamically selects layout based on content richness
* Content scoring algorithm: photos, description, comments, kudos, PRs all contribute points
* Variants: auto (default), compact (2 pages), standard (4 pages), full (6+ pages), minimal (2 pages, no hero)
* BestEffortsTable already has gold/silver/bronze highlighting for PRs
* SplitsChartSVG has showElevation toggle for conditional elevation display
* Race color schemes supported via theme props

## -> NEEDS WORK
* RaceSpread template is pretty terrible, needs review.  May need to adjust visual-judge to assess how well a section hangs together, not just each page separately.

# Month Dividers ✅ DONE (PR #57)
* MonthDividers should be 2 pages -- left and right.  Perhaps photos on the left, calendar and comments, etc, on the right?
* Include a calendar for the month, in strava-streaks style (use existing component); if almost all activities are the same type (e.g., all runs), then use the strava-training style component
* Create a "default hierarchy" of activites within the month -- e.g., each activity is given points for the number of PRs it includes, or if it's in the top-5 by kudos / comments, relative effort, distance, elevation, etc.  Then, sort the activities within the month based on this hierarchy.
* Use the default hierarchy to choose photos and comments to display on the monthly divider page (e.g., comments with the most likes go first; then sorted by highest-hierarchy-points first)

## -> NOT DONE
* If no photos, left-side divider page should be blank; currently has month name
* right-side divider page: calendar is falling off bottom of page; no comments or descriptions or highlights of any sort

**Implementation completed (2026-01-13):**
* Created `MonthlyDividerSpread.tsx` with 2-page layout:
  - Left page: 2x2 photo grid from top-scored activities with month/year header
  - Right page: Activity calendar (IconCalendarMonth for mixed sports, BubbleCalendarMonth for single-sport) + stats row + top 2 comments
* Added `scoreActivity()` function for activity hierarchy scoring:
  - PRs (5pts each), kudos (0.5pts each), comments (2pts each), suffer score, distance, elevation, photos (3pts each), description (2pts), race status (10pts)
* Added `getTopPhotos()` and `getTopComments()` functions using hierarchy scores
* Visual judge scores: Left page 80, Right page 83 (both pass)
* Added `suffer_score` and `total_photo_count` to StravaActivity type
* Increased calendar day number size for better print readability

# Activity Log
* Activity Log entries should include: descriptions; kudo count; comments; photos if possible (may be hard given Strava API call limits?)

